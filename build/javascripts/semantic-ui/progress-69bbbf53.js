/*!
 * # Fomantic-UI - Progress
 * http://github.com/fomantic/Fomantic-UI/
 *
 *
 * Released under the MIT license
 * http://opensource.org/licenses/MIT
 *
 */
!function(e,t,n,r){"use strict";e.isFunction=e.isFunction||function(e){return"function"==typeof e&&"number"!=typeof e.nodeType},t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.progress=function(t){var a,o=e(this),i=o.selector||"",s=(new Date).getTime(),l=[],u=arguments[0],c="string"==typeof u,p=[].slice.call(arguments,1);return o.each(function(){var o,d,g=e.isPlainObject(t)?e.extend(!0,{},e.fn.progress.settings,t):e.extend({},e.fn.progress.settings),v=g.className,f=g.metadata,m=g.namespace,b=g.selector,h=g.error,y="."+m,x="module-"+m,w=e(this),A=e(this).find(b.bar),V=e(this).find(b.progress),E=e(this).find(b.label),T=this,P=w.data(x),C=!1;d={helper:{sum:function(e){return Array.isArray(e)?e.reduce(function(e,t){return e+Number(t)},0):0},derivePrecision:function(e,t){for(var n=0,r=1,a=e/t;n<10&&!((a*=r)>1);)r=Math.pow(10,n++);return r},forceArray:function(e){return Array.isArray(e)?e:isNaN(e)?"string"==typeof e?e.split(","):[]:[e]}},initialize:function(){d.set.duration(),d.set.transitionEvent(),d.debug(T),d.read.metadata(),d.read.settings(),d.instantiate()},instantiate:function(){d.verbose("Storing instance of progress",d),P=d,w.data(x,d)},destroy:function(){d.verbose("Destroying previous progress for",w),clearInterval(P.interval),d.remove.state(),w.removeData(x),P=r},reset:function(){d.remove.nextValue(),d.update.progress(0)},complete:function(e){(d.percent===r||d.percent<100)&&(d.remove.progressPoll(),!0!==e&&d.set.percent(100))},read:{metadata:function(){var e={percent:d.helper.forceArray(w.data(f.percent)),total:w.data(f.total),value:d.helper.forceArray(w.data(f.value))};e.total&&(d.debug("Total value set from metadata",e.total),d.set.total(e.total)),e.value.length>0&&(d.debug("Current value set from metadata",e.value),d.set.value(e.value),d.set.progress(e.value)),e.percent.length>0&&(d.debug("Current percent value set from metadata",e.percent),d.set.percent(e.percent))},settings:function(){!1!==g.total&&(d.debug("Current total set in settings",g.total),d.set.total(g.total)),!1!==g.value&&(d.debug("Current value set in settings",g.value),d.set.value(g.value),d.set.progress(d.value)),!1!==g.percent&&(d.debug("Current percent set in settings",g.percent),d.set.percent(g.percent))}},bind:{transitionEnd:function(e){var t=d.get.transitionEnd();A.one(t+y,function(t){clearTimeout(d.failSafeTimer),e.call(this,t)}),d.failSafeTimer=setTimeout(function(){A.triggerHandler(t)},g.duration+g.failSafeDelay),d.verbose("Adding fail safe timer",d.timer)}},increment:function(e){var t,n;d.has.total()?(t=d.get.value(),e=e||1):(t=d.get.percent(),e=e||d.get.randomValue()),n=t+e,d.debug("Incrementing percentage by",t,n,e),n=d.get.normalizedValue(n),d.set.progress(n)},decrement:function(e){var t,n,r=d.get.total();r?(t=d.get.value(),e=e||1,n=t-e,d.debug("Decrementing value by",e,t)):(t=d.get.percent(),e=e||d.get.randomValue(),n=t-e,d.debug("Decrementing percentage by",e,t)),n=d.get.normalizedValue(n),d.set.progress(n)},has:{progressPoll:function(){return d.progressPoll},total:function(){return!1!==d.get.total()}},get:{text:function(e,t){var n=t||0,r=d.get.value(n),a=d.total||0,o=C?d.get.displayPercent(n):d.get.percent(n),i=d.total>0?a-r:100-o;return e=e||"",e=e.replace("{value}",r).replace("{total}",a).replace("{left}",i).replace("{percent}",o).replace("{bar}",g.text.bars[n]||""),d.verbose("Adding variables to progress bar text",e),e},normalizedValue:function(e){if(e<0)return d.debug("Value cannot decrement below 0"),0;if(d.has.total()){if(e>d.total)return d.debug("Value cannot increment above total",d.total),d.total}else if(e>100)return d.debug("Value cannot increment above 100 percent"),100;return e},updateInterval:function(){return"auto"==g.updateInterval?g.duration:g.updateInterval},randomValue:function(){return d.debug("Generating random increment percentage"),Math.floor(Math.random()*g.random.max+g.random.min)},numericValue:function(e){return"string"==typeof e?""!==e.replace(/[^\d.]/g,"")&&+e.replace(/[^\d.]/g,""):e},transitionEnd:function(){var e,t=n.createElement("element"),a={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in a)if(t.style[e]!==r)return a[e]},displayPercent:function(t){var n=e(A[t]),r=n.width(),a=w.width(),o=parseInt(n.css("min-width"),10),i=r>o?r/a*100:d.percent;return g.precision>0?Math.round(i*(10*g.precision))/(10*g.precision):Math.round(i)},percent:function(e){return d.percent&&d.percent[e||0]||0},value:function(e){return d.nextValue||d.value&&d.value[e||0]||0},total:function(){return d.total||!1}},create:{progressPoll:function(){d.progressPoll=setTimeout(function(){d.update.toNextValue(),d.remove.progressPoll()},d.get.updateInterval())}},is:{complete:function(){return d.is.success()||d.is.warning()||d.is.error()},success:function(){return w.hasClass(v.success)},warning:function(){return w.hasClass(v.warning)},error:function(){return w.hasClass(v.error)},active:function(){return w.hasClass(v.active)},visible:function(){return w.is(":visible")}},remove:{progressPoll:function(){d.verbose("Removing progress poll timer"),d.progressPoll&&(clearTimeout(d.progressPoll),delete d.progressPoll)},nextValue:function(){d.verbose("Removing progress value stored for next update"),delete d.nextValue},state:function(){d.verbose("Removing stored state"),delete d.total,delete d.percent,delete d.value},active:function(){d.verbose("Removing active state"),w.removeClass(v.active)},success:function(){d.verbose("Removing success state"),w.removeClass(v.success)},warning:function(){d.verbose("Removing warning state"),w.removeClass(v.warning)},error:function(){d.verbose("Removing error state"),w.removeClass(v.error)}},set:{barWidth:function(t){d.debug("set bar width with ",t),t=d.helper.forceArray(t);var n=-1,r=-1,a=d.helper.sum(t),o=A.length,i=o>1,s=t.map(function(t,s){var l=s===o-1&&0===a,u=e(A[s]);return 0===t&&i&&!l?u.css("display","none"):(i&&l&&u.css("background","transparent"),-1==n&&(n=s),r=s,u.css({display:"block",width:t+"%"})),parseFloat(t)});t.forEach(function(t,a){e(A[a]).css({borderTopLeftRadius:a==n?"":0,borderBottomLeftRadius:a==n?"":0,borderTopRightRadius:a==r?"":0,borderBottomRightRadius:a==r?"":0})}),w.attr("data-percent",s)},duration:function(e){e=e||g.duration,e="number"==typeof e?e+"ms":e,d.verbose("Setting progress bar transition duration",e),A.css({"transition-duration":e})},percent:function(e){e=d.helper.forceArray(e).map(function(e){return"string"==typeof e?+e.replace("%",""):e});var t=d.has.total(),n=d.helper.sum(e),a=e.length>1&&t,o=d.helper.sum(d.helper.forceArray(d.value));if(a&&o>d.total)d.error(h.sumExceedsTotal,o,d.total);else if(!a&&n>100)d.error(h.tooHigh,n);else if(n<0)d.error(h.tooLow,n);else{var i=g.precision>0?g.precision:a?d.helper.derivePrecision(Math.min.apply(null,d.value),d.total):r,s=e.map(function(e){return i>0?Math.round(e*(10*i))/(10*i):Math.round(e)});d.percent=s,t||(d.value=s.map(function(e){return i>0?Math.round(e/100*d.total*(10*i))/(10*i):Math.round(e/100*d.total*10)/10}),g.limitValues&&(d.value=d.value.map(function(e){return e>100?100:d.value<0?0:d.value}))),d.set.barWidth(e),d.set.labelInterval(),d.set.labels()}g.onChange.call(T,e,d.value,d.total)},labelInterval:function(){var t=function(){d.verbose("Bar finished animating, removing continuous label updates"),clearInterval(d.interval),C=!1,d.set.labels()};clearInterval(d.interval),d.bind.transitionEnd(t),C=!0,d.interval=setInterval(function(){e.contains(n.documentElement,T)||(clearInterval(d.interval),C=!1),d.set.labels()},g.framerate)},labels:function(){d.verbose("Setting both bar progress and outer label text"),d.set.barLabel(),d.set.state()},label:function(e){(e=e||"")&&(e=d.get.text(e),d.verbose("Setting label to text",e),E.text(e))},state:function(e){e=e!==r?e:d.helper.sum(d.percent),100===e?g.autoSuccess&&1===A.length&&!(d.is.warning()||d.is.error()||d.is.success())?(d.set.success(),d.debug("Automatically triggering success at 100%")):(d.verbose("Reached 100% removing active state"),d.remove.active(),d.remove.progressPoll()):e>0?(d.verbose("Adjusting active progress bar label",e),d.set.active()):(d.remove.active(),d.set.label(g.text.active))},barLabel:function(t){V.map(function(n,a){var o=e(a);t!==r?o.text(d.get.text(t,n)):"ratio"==g.label&&d.total?(d.verbose("Adding ratio to bar label"),o.text(d.get.text(g.text.ratio,n))):"percent"==g.label&&(d.verbose("Adding percentage to bar label"),o.text(d.get.text(g.text.percent,n)))})},active:function(e){e=e||g.text.active,d.debug("Setting active state"),g.showActivity&&!d.is.active()&&w.addClass(v.active),d.remove.warning(),d.remove.error(),d.remove.success(),e=g.onLabelUpdate("active",e,d.value,d.total),e&&d.set.label(e),d.bind.transitionEnd(function(){g.onActive.call(T,d.value,d.total)})},success:function(e,t){e=e||g.text.success||g.text.active,d.debug("Setting success state"),w.addClass(v.success),d.remove.active(),d.remove.warning(),d.remove.error(),d.complete(t),g.text.success?(e=g.onLabelUpdate("success",e,d.value,d.total),d.set.label(e)):(e=g.onLabelUpdate("active",e,d.value,d.total),d.set.label(e)),d.bind.transitionEnd(function(){g.onSuccess.call(T,d.total)})},warning:function(e,t){e=e||g.text.warning,d.debug("Setting warning state"),w.addClass(v.warning),d.remove.active(),d.remove.success(),d.remove.error(),d.complete(t),e=g.onLabelUpdate("warning",e,d.value,d.total),e&&d.set.label(e),d.bind.transitionEnd(function(){g.onWarning.call(T,d.value,d.total)})},error:function(e,t){e=e||g.text.error,d.debug("Setting error state"),w.addClass(v.error),d.remove.active(),d.remove.success(),d.remove.warning(),d.complete(t),e=g.onLabelUpdate("error",e,d.value,d.total),e&&d.set.label(e),d.bind.transitionEnd(function(){g.onError.call(T,d.value,d.total)})},transitionEvent:function(){o=d.get.transitionEnd()},total:function(e){d.total=e},value:function(e){d.value=d.helper.forceArray(e)},progress:function(e){d.has.progressPoll()?(d.debug("Updated within interval, setting next update to use new value",e),d.set.nextValue(e)):(d.debug("First update in progress update interval, immediately updating",e),d.update.progress(e),d.create.progressPoll())},nextValue:function(e){d.nextValue=e}},update:{toNextValue:function(){var e=d.nextValue;e&&(d.debug("Update interval complete using last updated value",e),d.update.progress(e),d.remove.nextValue())},progress:function(e){var t=d.has.total();t&&d.set.value(e);var n=d.helper.forceArray(e).map(function(e){var n;return e=d.get.numericValue(e),!1===e&&d.error(h.nonNumeric,e),e=d.get.normalizedValue(e),t?(n=e/d.total*100,d.debug("Calculating percent complete from total",n)):(n=e,d.debug("Setting value to exact percentage value",n)),n});d.set.percent(n)}},setting:function(t,n){if(d.debug("Changing setting",t,n),e.isPlainObject(t))e.extend(!0,g,t);else{if(n===r)return g[t];e.isPlainObject(g[t])?e.extend(!0,g[t],n):g[t]=n}},internal:function(t,n){if(e.isPlainObject(t))e.extend(!0,d,t);else{if(n===r)return d[t];d[t]=n}},debug:function(){!g.silent&&g.debug&&(g.performance?d.performance.log(arguments):(d.debug=Function.prototype.bind.call(console.info,console,g.name+":"),d.debug.apply(console,arguments)))},verbose:function(){!g.silent&&g.verbose&&g.debug&&(g.performance?d.performance.log(arguments):(d.verbose=Function.prototype.bind.call(console.info,console,g.name+":"),d.verbose.apply(console,arguments)))},error:function(){g.silent||(d.error=Function.prototype.bind.call(console.error,console,g.name+":"),d.error.apply(console,arguments))},performance:{log:function(e){var t,n,r;g.performance&&(t=(new Date).getTime(),r=s||t,n=t-r,s=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:T,"Execution Time":n})),clearTimeout(d.performance.timer),d.performance.timer=setTimeout(d.performance.display,500)},display:function(){var t=g.name+":",n=0;s=!1,clearTimeout(d.performance.timer),e.each(l,function(e,t){n+=t["Execution Time"]}),t+=" "+n+"ms",i&&(t+=" '"+i+"'"),(console.group!==r||console.table!==r)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,n,o){var i,s,l,u=P;return n=n||p,o=T||o,"string"==typeof t&&u!==r&&(t=t.split(/[\. ]/),i=t.length-1,e.each(t,function(n,a){var o=n!=i?a+t[n+1].charAt(0).toUpperCase()+t[n+1].slice(1):t;if(e.isPlainObject(u[o])&&n!=i)u=u[o];else{if(u[o]!==r)return s=u[o],!1;if(!e.isPlainObject(u[a])||n==i)return u[a]!==r?(s=u[a],!1):(d.error(h.method,t),!1);u=u[a]}})),e.isFunction(s)?l=s.apply(o,n):s!==r&&(l=s),Array.isArray(a)?a.push(l):a!==r?a=[a,l]:l!==r&&(a=l),s}},c?(P===r&&d.initialize(),d.invoke(u)):(P!==r&&P.invoke("destroy"),d.initialize())}),a!==r?a:this},e.fn.progress.settings={name:"Progress",namespace:"progress",silent:!1,debug:!1,verbose:!1,performance:!0,random:{min:2,max:5},duration:300,updateInterval:"auto",autoSuccess:!0,showActivity:!0,limitValues:!0,label:"percent",precision:0,framerate:1e3/30,percent:!1,total:!1,value:!1,failSafeDelay:100,onLabelUpdate:function(e,t){return t},onChange:function(){},onSuccess:function(){},onActive:function(){},onError:function(){},onWarning:function(){},error:{method:"The method you called is not defined.",nonNumeric:"Progress value is non numeric",tooHigh:"Value specified is above 100%",tooLow:"Value specified is below 0%",sumExceedsTotal:"Sum of multple values exceed total"},regExp:{variable:/\{\$*[A-z0-9]+\}/g},metadata:{percent:"percent",total:"total",value:"value"},selector:{bar:"> .bar",label:"> .label",progress:".bar > .progress"},text:{active:!1,error:!1,success:!1,warning:!1,percent:"{percent}%",ratio:"{value} of {total}",bars:[""]},className:{active:"active",error:"error",success:"success",warning:"warning"}}}(jQuery,window,document);